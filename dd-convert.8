.\" Copyright (c) 2017 Peter J. Philipp
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.Dd January 2, 2017
.Dt DD-CONVERT 8
.Os 
.Sh NAME
.Nm dd-convert
.Nd the DelphinusDNS Convert Utility
.Sh SYNOPSIS
.Nm dd-convert
.Op Fl a Ar algorithm
.Op Fl B Ar bits
.Op Fl e Ar seconds
.Op Fl h
.Op Fl i Ar inputfile
.Op Fl I Ar iterations
.Op Fl k Ar KSKfile
.Op Fl K
.Op Fl n Ar zonename
.Op Fl o Ar outputfile
.Op Fl s Ar salt
.Op Fl t Ar ttl
.Op Fl z Ar ZSKfile
.Op Fl Z
.Sh DESCRIPTION
.Nm
is a utility which signs a delphinusdnsd zone file to output into a 
delphinusdnsd readable DNSSEC zonefile.  This utility is based on the
ruby program dd-convert.rb which was part of delphinusdns 1.0 release.  From 
delphinusdns 1.1 onwards this is the utility expected to be used for zone 
signing, unless the ruby utility proves better.
.Pp
The options are as follows:
.Pp
.Bl -tag -width Ds
.It Xo
.Fl a
.Ar algorithm
.Xc
specifies the algorithm to use represented as an integer.  There currently is
only 3 algorithms possible and they are of RSA types.  There is 
RSASHA1-NSEC3-SHA1
which has algorithm 7, there is RSASHA256 which has algorithm 8 (the default), 
and there is RSASHA512 which has algorithm 10.
.It Xo
.Fl B
.Ar bits
Specifies the number of bits used with the algorithm.  The default value is
2048.
.It Xo
.Fl e
.Ar seconds
Specifies how many seconds into the future the expiry time of the signed zone
will be.  By default this is 5184000 seconds.  To re-sign a zone with a
different signtime than what the current available time (now) is, you'll have
to recompile the binary with PROVIDED_SIGNTIME set to 1.
.It Xo
.Fl h
Provides a usage output.
.It Xo
.Fl i
.Ar inputfile
Specifies an inputfile, used in conjunction with the
.Fl n
option which specifies the name of the zone.
.It Xo
.Fl I 
.Ar iterations
This is the number of iterations used with the NSEC3 resource record hash that 
.Nm
 produces.
.It Xo
.Fl k
.Ar KSKfile
When re-signing a zone with a provided KSK keyfile use this option to specify
the KSK file.  Roll-overs are not yet supported.
.It Xo
.Fl K
Sign a zone with a newly created KSK keyfile.  It is assumed that LibreSSL will
create random defaults that are cryptographically strong.
.It Xo
.Fl n
.Ar zonename
This option in conjunction with the 
Fl i
option must be provided.  Otherwise dd-convert will not know what to sign.
.It Xo
.Fl o
.Ar outputfile
When this option is not specified dd-convert will output to standard output.  A
- provided to this option will also output to standard output otherwise it will
be output to the specified file.
.It Xo
.Fl s
.Ar salt
is the salt for the NSEC3 hash.  This is a security option that applies the
same as anything that requires salt.  The input is in hexadecimal.
.It Xo
.Fl t
.Ar ttl
is the time to live for created DNSKEY resource records.  Default is 3600.
.It Xo
.Fl z
.Ar ZSKfile
When re-signing a zone with a provided ZSK keyfile use this option to 
specify the KSK file.  Roll-overs are not yet supported.
.It Xo
.Fl Z
Sign a zone with a newly created ZSK keyfile.  It is assumed that LibreSSL
will create random defaults that are cryptographically strong.
.El
.Sh FILES
.Pa tmp/
.Sh SEE ALSO
.Xr delphinusdnsd 8 , 
.Xr delphinusdns.conf 5 , 
.Sh AUTHORS
This software was written by
.An Peter J. Philipp Aq pjp@centroid.eu

