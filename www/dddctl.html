<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   In parts copyright (template) by:
  
  	$OpenBSD: vmctl.8,v 1.39 2018/02/24 13:14:09 jmc Exp $
  
   Copyright (c) 2018-2021 Peter J. Philipp
   Copyright (c) 2015 Mike Larkin <mlarkin@openbsd.org>
  
   Permission to use, copy, modify, and distribute this software for any
   purpose with or without fee is hereby granted, provided that the above
   copyright notice and this permission notice appear in all copies.
  
   THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
   WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
   MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
   ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
   WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
   ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
   OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
   -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>DDDCTL(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DDDCTL(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">DDDCTL(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">dddctl</code> &#x2014; <span class="Nd">control
    and manage delphinusdnsd</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">dddctl</code></td>
    <td><var class="Ar">command</var> [<var class="Ar">arg ...</var>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <code class="Nm">dddctl</code> utility is used to control,
    manage and sign delphinusdnsd (zone files)</p>
<p class="Pp">The commands are as follows:</p>
<dl class="Bl-tag">
  <dt id="bindfile"><a class="permalink" href="#bindfile"><code class="Cm">bindfile</code></a>
    <var class="Ar">zonename zonefile</var></dt>
  <dd>Convert a <a class="Xr">delphinusdns.conf(5)</a> zonefile to BIND format
      with the specified zonename domain name.</dd>
  <dt id="configtest"><a class="permalink" href="#configtest"><code class="Cm">configtest</code></a>
    [<code class="Fl">-cn</code>] [<var class="Ar">configfile</var>]</dt>
  <dd>Test the entire config, alternatively you can test a
      <a class="Xr">delphinusdns.conf(5)</a> config file by specifying such a
      file. In case of configured rzones, when there is no .repl file in
      /var/delphinusdnsd/replicant/ it will pull the replicant file via a
      socket, unless the [<code class="Fl">-n</code>] flag has been
    specified.</dd>
  <dt id="help"><a class="permalink" href="#help"><code class="Cm">help</code></a>
    <var class="Ar">[command]</var></dt>
  <dd>provides an in-binary help. Alternatively you can specify a subcommand to
      provide help for. Ie. <code class="Nm">dddctl</code> help sign.</dd>
  <dt id="query"><a class="permalink" href="#query"><code class="Cm">query</code></a>
    [<code class="Fl">-DITZ</code>] [<code class="Fl">-@</code>
    <var class="Ar">server</var>] [<code class="Fl">-P</code>
    <var class="Ar">port</var>] [<code class="Fl">-p</code>
    <var class="Ar">file</var>] [<code class="Fl">-Q</code>
    <var class="Ar">server</var>] [<code class="Fl">-y</code>
    <var class="Ar">keyname:password</var>]</dt>
  <dd>performs rudamentary query operations on a DNS server.
    <dl class="Bl-tag">
      <dt id="D"><a class="permalink" href="#D"><code class="Fl">-D</code></a></dt>
      <dd>use the DO bit, to get DNSSEC answers.</dd>
      <dt id="I"><a class="permalink" href="#I"><code class="Fl">-I</code></a></dt>
      <dd>indent output.</dd>
      <dt id="T"><a class="permalink" href="#T"><code class="Fl">-T</code></a></dt>
      <dd>use TCP instead of UDP.</dd>
      <dt id="Z"><a class="permalink" href="#Z"><code class="Fl">-Z</code></a></dt>
      <dd>output in delphinusdnsd zonefile format.</dd>
      <dt id="@"><a class="permalink" href="#@"><code class="Fl">-@</code></a>
        <var class="Ar">server</var></dt>
      <dd>queries the specified server (in IPv4 IP).</dd>
      <dt id="P"><a class="permalink" href="#P"><code class="Fl">-P</code></a>
        <var class="Ar">port</var></dt>
      <dd>query on the specified port.</dd>
      <dt id="p"><a class="permalink" href="#p"><code class="Fl">-p</code></a>
        <var class="Ar">file</var></dt>
      <dd>output/pipe to the specified file.</dd>
      <dt id="Q"><a class="permalink" href="#Q"><code class="Fl">-Q</code></a>
        <var class="Ar">server</var></dt>
      <dd>queries the specified server (is synonymous with -@).</dd>
      <dt id="y"><a class="permalink" href="#y"><code class="Fl">-y</code></a>
        <var class="Ar">keyname:password</var></dt>
      <dd>Use a TSIG keyname and password. The keyname is plaintext in a DNS
          name format , the password is in BASE64. This differs from dig in that
          the leading HMAC type is omitted because it's always type
          'hmac-sha256'.</dd>
    </dl>
  </dd>
  <dt id="sign"><a class="permalink" href="#sign"><code class="Cm">sign</code></a>
    [<code class="Fl">-KMXZ</code>] [<code class="Fl">-a</code>
    <var class="Ar">algorithm</var>] [<code class="Fl">-B</code>
    <var class="Ar">bits</var>] [<code class="Fl">-e</code>
    <var class="Ar">seconds</var>] [<code class="Fl">-I</code>
    <var class="Ar">iterations</var>] [<code class="Fl">-i</code>
    <var class="Ar">inputfile</var>] [<code class="Fl">-k</code>
    <var class="Ar">KSK</var>] [<code class="Fl">-m</code>
    <var class="Ar">mask</var>] [<code class="Fl">-n</code>
    <var class="Ar">zonename</var>] [<code class="Fl">-o</code>
    <var class="Ar">output</var>] [<code class="Fl">-R</code>
    <var class="Ar">keyword</var>] [<code class="Fl">-S</code>
    <var class="Ar">pid</var>] [<code class="Fl">-s</code>
    <var class="Ar">salt</var>] [<code class="Fl">-t</code>
    <var class="Ar">ttl</var>] [<code class="Fl">-x</code>
    <var class="Ar">serial</var>] [<code class="Fl">-z</code>
    <var class="Ar">ZSK</var>]</dt>
  <dd>performs signing operations on a zonefile for DNSSEC operations.
    <dl class="Bl-tag">
      <dt id="K"><a class="permalink" href="#K"><code class="Fl">-K</code></a></dt>
      <dd>create a new KSK key.</dd>
      <dt id="M"><a class="permalink" href="#M"><code class="Fl">-M</code></a></dt>
      <dd>add a ZONEMD RR to the zone (Will not work with already present
          ZONEMD's). Please see the zonemd command, for what algorithms are
          used. A DNSSEC signed zone can be integrity checked with the zonemd
          command.</dd>
      <dt id="X"><a class="permalink" href="#X"><code class="Fl">-X</code></a></dt>
      <dd>update serial to YYYYMMDD01.</dd>
      <dt id="Z~2"><a class="permalink" href="#Z~2"><code class="Fl">-Z</code></a></dt>
      <dd>create a new ZSK key.</dd>
      <dt id="a"><a class="permalink" href="#a"><code class="Fl">-a</code></a>
        <var class="Ar">algorithm</var></dt>
      <dd>use algorithm (integer).</dd>
      <dt id="B"><a class="permalink" href="#B"><code class="Fl">-B</code></a>
        <var class="Ar">bits</var></dt>
      <dd>use number of bits (integer).</dd>
      <dt id="e"><a class="permalink" href="#e"><code class="Fl">-e</code></a>
        <var class="Ar">seconds</var></dt>
      <dd>expiry in seconds.</dd>
      <dt id="I~2"><a class="permalink" href="#I~2"><code class="Fl">-I</code></a>
        <var class="Ar">iterations</var></dt>
      <dd>use (integer) NSEC3 iterations.</dd>
      <dt id="i"><a class="permalink" href="#i"><code class="Fl">-i</code></a>
        <var class="Ar">inputfile</var></dt>
      <dd>use the inputfile of unsigned zone.</dd>
      <dt id="k"><a class="permalink" href="#k"><code class="Fl">-k</code></a>
        <var class="Ar">KSK</var></dt>
      <dd>use provided KSK key-signing keyname.</dd>
      <dt id="m"><a class="permalink" href="#m"><code class="Fl">-m</code></a>
        <var class="Ar">mask</var></dt>
      <dd>run the following masked functions (used for debug).</dd>
      <dt id="n"><a class="permalink" href="#n"><code class="Fl">-n</code></a>
        <var class="Ar">zonename</var></dt>
      <dd>run for zonename zone.</dd>
      <dt id="o"><a class="permalink" href="#o"><code class="Fl">-o</code></a>
        <var class="Ar">output</var></dt>
      <dd>output to file, may be '-' for stdout.</dd>
      <dt id="R"><a class="permalink" href="#R"><code class="Fl">-R</code></a>
        <var class="Ar">keyword</var></dt>
      <dd>chooses a roll-over method. Current keywords are 'prep' and 'double'
          for Pre Publication Rollover Method or Double-Signature Rollover
          method respectively. Default is 'prep'.</dd>
      <dt id="S"><a class="permalink" href="#S"><code class="Fl">-S</code></a>
        <var class="Ar">pid</var></dt>
      <dd>sign with this pid ('KSK' or 'ZSK' if used in conjunction with
        [-ZK]).</dd>
      <dt id="s"><a class="permalink" href="#s"><code class="Fl">-s</code></a>
        <var class="Ar">salt</var></dt>
      <dd>salt for NSEC3 (in hexadecimal).</dd>
      <dt id="t"><a class="permalink" href="#t"><code class="Fl">-t</code></a>
        <var class="Ar">ttl</var></dt>
      <dd>time-to-live for DNSKEY's.</dd>
      <dt id="x"><a class="permalink" href="#x"><code class="Fl">-x</code></a>
        <var class="Ar">serial</var></dt>
      <dd>update serial in SOA to serial.</dd>
      <dt id="z"><a class="permalink" href="#z"><code class="Fl">-z</code></a>
        <var class="Ar">ZSK</var></dt>
      <dd>use provided ZSK zone-signing keyname.</dd>
    </dl>
  </dd>
  <dt id="sshfp"><a class="permalink" href="#sshfp"><code class="Cm">sshfp</code></a>
    <var class="Ar">hostname [-k keyfile] [-t ttl]</var></dt>
  <dd>produces an SSHFP output on stdout in <a class="Xr">delphinusdnsd(8)</a>
      format.</dd>
  <dt id="start"><a class="permalink" href="#start"><code class="Cm">start</code></a>
    <var class="Ar">[-f configfile] [-I identstring] [-s path]</var></dt>
  <dd>starts <a class="Xr">delphinusdnsd(8)</a> with an optional configfile and
      control socket path.</dd>
  <dt id="stop"><a class="permalink" href="#stop"><code class="Cm">stop</code></a>
    <var class="Ar">[-I identstring] [-s path]</var></dt>
  <dd>stops delphinusdnsd with optional control socket path.</dd>
  <dt id="restart"><a class="permalink" href="#restart"><code class="Cm">restart</code></a>
    <var class="Ar">[-I identstring] [-s path]</var></dt>
  <dd>restarts delphinusdnsd with optional control socket path.</dd>
  <dt id="zonemd"><a class="permalink" href="#zonemd"><code class="Cm">zonemd</code></a>
    <var class="Ar">[-c] [-n zonename] [-o outfile] file</var></dt>
  <dd>message digests (SIMPLE scheme, algorithm SHA386) a non-DNSSEC zonefile.
    <dl class="Bl-tag">
      <dt id="c"><a class="permalink" href="#c"><code class="Fl">-c</code></a></dt>
      <dd>checks a zonefile wether an embedded ZONEMD matches.</dd>
      <dt id="o~2"><a class="permalink" href="#o~2"><code class="Fl">-o</code></a>
        <var class="Ar">outfile</var></dt>
      <dd>specifies an optional output file, otherwise stdout.</dd>
    </dl>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">To create a ZSK and a KSK key the first time one may do:</p>
<p class="Pp">dddctl sign -Z -K -n delphinusdns.org</p>
<p class="Pp">To sign a delphinusdns zone the first time one may do:</p>
<p class="Pp">dddctl sign -Z -K -a 13 -B 2048 -n delphinusdns.org -i
    delphinusdns.org.zone -o delphinusdns.org.zone.signed</p>
<p class="Pp">Please see the delphinusdns.org website for more examples.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr">delphinusdnsd(8)</a>
    <a class="Xr">delphinusdns.conf(5)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag Bl-compact">
  <dt><span class="Pa">/var/delphinusdnsd/etc/delphinusdns.conf</span></dt>
  <dd>default configfile</dd>
  <dt><span class="Pa">/var/delphinusdnsd/replicant/</span></dt>
  <dd>replicant zone files pulled via AXFR</dd>
  <dt><span class="Pa">/var/run/delphinusdnsd.sock</span></dt>
  <dd>default <code class="Nm">dddctl</code> control socket</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">On Linux, with a replicant zone set up in the configfile, a
    <code class="Nm">dddctl</code> configtest will error out (at least on the
    Raspberry Pi), the first time. Subsequent configtests should state OK, so
    check for this. I haven't found the bug for this yet. Another bug is that
    dddctl query will not sanitize input from the net. This could be used to
    change characteristics of the terminal with means of escape codes.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp"><span class="An">Peter J. Philipp</span>
    &lt;<a class="Mt" href="mailto:pbug44@delphinusdns.org">pbug44@delphinusdns.org</a>&gt;</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">April 27, 2021</td>
    <td class="foot-os">OpenBSD 7.1</td>
  </tr>
</table>
</body>
</html>
